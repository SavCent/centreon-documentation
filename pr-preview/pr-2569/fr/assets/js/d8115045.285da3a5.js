"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[87864],{65613:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>u,default:()=>g,frontMatter:()=>c,metadata:()=>i,toc:()=>d});n(667294);var r=n(603905),a=n(451715),l=n(907626);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const c={id:"offline",title:"Installation offline"},u=void 0,i={unversionedId:"installation/offline",id:"version-22.04/installation/offline",title:"Installation offline",description:"Pour pouvoir installer Centreon sur des serveurs sans acc\xe8s internet, cr\xe9ez une copie locale du d\xe9p\xf4t Centreon sur un serveur avec acc\xe8s internet, puis faites pointer vos serveurs Centreon sans acc\xe8s internet sur celui-ci.",source:"@site/i18n/fr/docusaurus-plugin-content-docs/version-22.04/installation/offline.md",sourceDirName:"installation",slug:"/installation/offline",permalink:"/centreon-documentation/pr-preview/pr-2569/fr/docs/22.04/installation/offline",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/i18n/fr/docusaurus-plugin-content-docs/version-22.04/installation/offline.md",tags:[],version:"22.04",lastUpdatedAt:1693325495,formattedLastUpdatedAt:"29 ao\xfbt 2023",frontMatter:{id:"offline",title:"Installation offline"},sidebar:"version-22.04/docs",previous:{title:"Configuration avanc\xe9e",permalink:"/centreon-documentation/pr-preview/pr-2569/fr/docs/22.04/monitoring/monitoring-servers/advanced-configuration"},next:{title:"Centreon-HA Overview",permalink:"/centreon-documentation/pr-preview/pr-2569/fr/docs/22.04/installation/installation-of-centreon-ha/overview"}},m={},d=[{value:"Cr\xe9er une copie locale du d\xe9p\xf4t Centreon",id:"cr\xe9er-une-copie-locale-du-d\xe9p\xf4t-centreon",level:2},{value:"Garder votre d\xe9p\xf4t local \xe0 jour",id:"garder-votre-d\xe9p\xf4t-local-\xe0-jour",level:2}],k={toc:d},b="wrapper";function g(e){var{components:t}=e,n=p(e,["components"]);return(0,r.kt)(b,s(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}({},k,n),{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Pour pouvoir installer Centreon sur des serveurs sans acc\xe8s internet, cr\xe9ez une copie locale du d\xe9p\xf4t Centreon sur un serveur avec acc\xe8s internet, puis faites pointer vos serveurs Centreon sans acc\xe8s internet sur celui-ci."),(0,r.kt)("h2",{id:"cr\xe9er-une-copie-locale-du-d\xe9p\xf4t-centreon"},"Cr\xe9er une copie locale du d\xe9p\xf4t Centreon"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Installez ",(0,r.kt)("strong",{parentName:"li"},"centreon-release")," sur votre serveur miroir.")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf install -y https://yum.centreon.com/standard/22.04/el8/stable/noarch/RPMS/centreon-release-22.04-3.el8.noarch.rpm\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install -y https://yum.centreon.com/standard/22.04/el7/stable/noarch/RPMS/centreon-release-22.04-3.el7.centos.noarch.rpm\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'echo "deb https://apt.centreon.com/repository/22.04/ $(lsb_release -sc) main" | tee /etc/apt/sources.list.d/centreon.list\n')))),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"R\xe9cup\xe9rez la cl\xe9 gpg pour les paquets :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"rpm --import https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"rpm --import https://yum-gpg.centreon.com/RPM-GPG-KEY-CES\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"wget -O- https://apt-key.centreon.com | gpg --dearmor | tee /etc/apt/trusted.gpg.d/centreon.gpg > /dev/null 2>&1\n")))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Cr\xe9ez un r\xe9pertoire pour le d\xe9p\xf4t local :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p /var/www/html/repos/centreon\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir -p /var/www/html/repos/centreon\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"mkdir /var/www/html/centreon\n")))),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Installez les paquets n\xe9cessaires :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install yum-utils createrepo httpd\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"yum install yum-utils createrepo httpd\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"apt install apache2 debmirror\n")))),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Synchronisez les d\xe9p\xf4ts :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"reposync -p /var/www/html/repos/centreon/ --repo centreon-stable-noarch\nreposync -p /var/www/html/repos/centreon/ --repo centreon-stable\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"reposync -p /var/www/html/repos/centreon/ --repo centreon-stable-noarch\nreposync -p /var/www/html/repos/centreon/ --repo centreon-stable\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"debmirror \\\n-a amd64 \\\n--no-source \\\n-s main \\\n-h apt.centreon.com \\\n-d bullseye \\\n-r /repository/22.04 \\\n--keyring=/etc/apt/trusted.gpg.d/centreon.gpg \\\n--method=https \\\n/var/centreon-mirror/22.04\n")))),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Ex\xe9cutez les commandes suivantes :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("p",null,"Cr\xe9ez le d\xe9p\xf4t :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"createrepo /var/www/html/repos/centreon/\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("p",null,"Cr\xe9ez le d\xe9p\xf4t :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"createrepo /var/www/html/repos/centreon/\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("p",null,"Rendez disponible via Apache le d\xe9p\xf4t synchronis\xe9 localement :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"ln -s /var/centreon-mirror/22.04 /var/www/html/centreon/22.04\n")))),(0,r.kt)("ol",{start:7},(0,r.kt)("li",{parentName:"ol"},"D\xe9marrez le serveur web :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"service httpd start\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"service httpd24-httpd start\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl start apache2\n")))),(0,r.kt)("ol",{start:8},(0,r.kt)("li",{parentName:"ol"},"Sur votre serveur Centreon, \xe9ditez le fichier suivant :")),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/yum.repos.d/centreon.repo\n")),(0,r.kt)("p",null,"Ajoutez les lignes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"[centreon]\nname=centreon\nbaseurl=http://<mirror_ip_address>/repos/centreon\ngpgcheck=1\nenabled=1\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,r.kt)("inlineCode",{parentName:"p"},"<mirror_ip_address>")," par la v\xe9ritable adresse de votre d\xe9p\xf4t local."))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/yum.repos.d/centreon.repo\n")),(0,r.kt)("p",null,"Ajoutez les lignes suivantes :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"[centreon]\nname=centreon\nbaseurl=http://<mirror_ip_address>/repos/centreon\ngpgcheck=1\nenabled=1\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,r.kt)("inlineCode",{parentName:"p"},"<mirror_ip_address>")," par la v\xe9ritable adresse de votre d\xe9p\xf4t local."))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"vi /etc/apt/sources.list.d/centreon.list\n")),(0,r.kt)("p",null,"Ajoutez l'adresse du d\xe9p\xf4t miorir et, si besoin, commentez l'adresse du d\xe9p\xf4t officiel Centreon :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"deb http://`<mirror_ip_address>`/centreon/22.04 bullseye main\n#deb https://apt.centreon.com/repository/22.04/ bullseye main\n")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Remplacez ",(0,r.kt)("inlineCode",{parentName:"p"},"<mirror_ip_address>")," par la v\xe9ritable adresse de votre d\xe9p\xf4t local.")))),(0,r.kt)("h2",{id:"garder-votre-d\xe9p\xf4t-local-\xe0-jour"},"Garder votre d\xe9p\xf4t local \xe0 jour"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Afin de synchroniser r\xe9guli\xe8rement votre miroir avec le d\xe9p\xf4t Centreon, cr\xe9ez un fichier cron :"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd  /var/spool/cron\ncrontab -e\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Programmer la synchronisation :"))),(0,r.kt)(a.Z,{groupId:"sync",mdxType:"Tabs"},(0,r.kt)(l.Z,{value:"Alma / RHEL / Oracle Linux 8",label:"Alma / RHEL / Oracle Linux 8",mdxType:"TabItem"},(0,r.kt)("p",null,"Les commandes suivantes programmeront une synchronisation chaque jour \xe0 2h pour le d\xe9p\xf4t ",(0,r.kt)("strong",{parentName:"p"},"centreon-stable-noarch"),", et chaque jour \xe0 3h pour le d\xe9p\xf4t ",(0,r.kt)("strong",{parentName:"p"},"centreon-stable")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"* 2 * * * reposync -p /var/www/html/repos/centreon/ -r centreon-stable-noarch\n* 3 * * * reposync -p /var/www/html/repos/centreon/ -r centreon-stable\n"))),(0,r.kt)(l.Z,{value:"CentOS 7",label:"CentOS 7",mdxType:"TabItem"},(0,r.kt)("p",null,"Les commandes suivantes programmeront une synchronisation chaque jour \xe0 2h pour le d\xe9p\xf4t ",(0,r.kt)("strong",{parentName:"p"},"centreon-stable-noarch"),", et chaque jour \xe0 3h pour le d\xe9p\xf4t ",(0,r.kt)("strong",{parentName:"p"},"centreon-stable")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"* 2 * * * reposync -p /var/www/html/repos/centreon/ -r centreon-stable-noarch\n* 3 * * * reposync -p /var/www/html/repos/centreon/ -r centreon-stable\n"))),(0,r.kt)(l.Z,{value:"Debian 11",label:"Debian 11",mdxType:"TabItem"},(0,r.kt)("p",null,"La commande suivante programmera une synchronisation chaque jour \xe0 1h :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"* 01 * * * debmirror -a amd64 --no-source -s main -h apt.centreon.com -d bullseye -r /repository/22.04 --keyring=/etc/apt/trusted.gpg.d/centreon.gpg --method=https /var/centreon-mirror/22.04 >> /var/log/debmirror.log\n")))))}g.isMDXComponent=!0}}]);