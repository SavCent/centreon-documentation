"use strict";(self.webpackChunkcentreon_docs=self.webpackChunkcentreon_docs||[]).push([[92315],{15048:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>u,contentTitle:()=>m,default:()=>N,frontMatter:()=>p,metadata:()=>c,toc:()=>d});n(67294);var a=n(3905),l=n(51715),r=n(7626);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t}function s(t,e){if(null==t)return{};var n,a,l=function(t,e){if(null==t)return{};var n,a,l={},r=Object.keys(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||(l[n]=t[n]);return l}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(a=0;a<r.length;a++)n=r[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(l[n]=t[n])}return l}const p={id:"commands",title:"Commands"},m=void 0,c={unversionedId:"monitoring/basic-objects/commands",id:"monitoring/basic-objects/commands",title:"Commands",description:"Definition",source:"@site/cloud/monitoring/basic-objects/commands.md",sourceDirName:"monitoring/basic-objects",slug:"/monitoring/basic-objects/commands",permalink:"/centreon-documentation/pr-preview/staging/pr-2688/cloud/monitoring/basic-objects/commands",draft:!1,editUrl:"https://github.com/centreon/centreon-documentation/edit/staging/cloud/monitoring/basic-objects/commands.md",tags:[],version:"current",frontMatter:{id:"commands",title:"Commands"}},u={},d=[{value:"Definition",id:"definition",level:2},{value:"Adding a command",id:"adding-a-command",level:2},{value:"Configuration fields",id:"configuration-fields",level:2},{value:"Arguments and macros",id:"arguments-and-macros",level:2},{value:"Connectors",id:"connectors",level:2},{value:"SSH connector",id:"ssh-connector",level:3},{value:"Installation",id:"installation",level:4},{value:"Prerequisites",id:"prerequisites",level:5},{value:"Build",id:"build",level:5},{value:"Get sources",id:"get-sources",level:6},{value:"Configuration",id:"configuration",level:6},{value:"Compilation",id:"compilation",level:6},{value:"Install",id:"install",level:6},{value:"Configuration",id:"configuration-1",level:4},{value:"Binary arguments",id:"binary-arguments",level:5},{value:"Check arguments",id:"check-arguments",level:5},{value:"Technical details",id:"technical-details",level:5},{value:"Perl connector",id:"perl-connector",level:3},{value:"Installation",id:"installation-1",level:4},{value:"Prerequisites",id:"prerequisites-1",level:5},{value:"Build",id:"build-1",level:5},{value:"Get sources",id:"get-sources-1",level:6},{value:"Configuration",id:"configuration-2",level:6},{value:"Compilation",id:"compilation-1",level:6},{value:"Install",id:"install-1",level:6},{value:"Configuration",id:"configuration-3",level:4},{value:"Binary arguments",id:"binary-arguments-1",level:5},{value:"Technical details",id:"technical-details-1",level:5}],k={toc:d},g="wrapper";function N(t){var{components:e}=t,p=s(t,["components"]);return(0,a.kt)(g,i(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){o(t,e,n[e])}))}return t}({},k,p),{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"definition"},"Definition"),(0,a.kt)("p",null,"A command is the definition of a line of command which uses a script or an application to perform an action. It is\npossible execute this command by specifying arguments."),(0,a.kt)("p",null,"There are four types of command:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Verification")," commands are used by the schedulers to verify the status of a host or of a service."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Notification")," commands are used by the schedulers to alert the contacts (via mail, SMS, etc.)."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Discovery")," commands are used by the schedulers to discover."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Miscellaneous")," commands are used by the additional modules (to perform certain actions), by the scheduler for\ndata processing, etc.")),(0,a.kt)("p",null,"All the commands can be configured in the menu: ",(0,a.kt)("strong",{parentName:"p"},"Configuration > Commands"),"."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(5744).Z,width:"1809",height:"571"})),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},'By default, locked commands are hidden. Check the "Locked elements" box to list all commands.')),(0,a.kt)("h2",{id:"adding-a-command"},"Adding a command"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Go to the ",(0,a.kt)("strong",{parentName:"li"},"Configuration > Commands")," menu"),(0,a.kt)("li",{parentName:"ol"},"Click on ",(0,a.kt)("strong",{parentName:"li"},"Add"))),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"image",src:n(50315).Z,width:"1974",height:"1278"})),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The configuration fields of a command are the same regardless of the type of command chosen.")),(0,a.kt)("h2",{id:"configuration-fields"},"Configuration fields"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"command Name")," field defined the name of the command."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Command Type")," field allows us to choose the type of command."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Command Line")," field indicates the application or the script use with the command."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Enable shell")," box allows us to enable functions that are specific to a shell such as the pipe, etc."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Argument Example")," field define examples of arguments (each argument starts with a \u201d!\u201d)"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Describe arguments")," button serves to add  a description to arguments of the \u201c$ARGn$\u201d type. This description\nwill be visible when using the command in a host or service form."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Clear arguments")," button deletes the description of arguments defined"),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Describe macros")," button serves to add  a description to all macros. This description will be visible when\nusing the command in a host or service form."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Connectors")," selectlist serves to link a Connector to the command. For more information on Connectors refer to the\nchapter entitled ",(0,a.kt)("em",{parentName:"li"},(0,a.kt)("a",{parentName:"em",href:"#perl-connector"},"Perl Connector"))," and ",(0,a.kt)("em",{parentName:"li"},(0,a.kt)("a",{parentName:"em",href:"#ssh-connector"},"SSH Connector")),"."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Graph template")," field serves to link the command to a graphic model."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("strong",{parentName:"li"},"Comment")," field can be used to make a comment on the command.")),(0,a.kt)("h2",{id:"arguments-and-macros"},"Arguments and macros"),(0,a.kt)("p",null,"In the ",(0,a.kt)("strong",{parentName:"p"},"Command Line")," field it is possible to use ",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("a",{parentName:"em",href:"/centreon-documentation/pr-preview/staging/pr-2688/cloud/monitoring/basic-objects/macros"},"macros"))," and arguments."),(0,a.kt)("p",null,"The macros are used to be able to pass various settings to the scripts called up by the commands. During execution\nof the command by the scheduler, each of the arguments and macros are replaced by their respective values.\nEach macro appears in the form ",(0,a.kt)("strong",{parentName:"p"},"$value$"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"$CENTREONPLUGINS$/centreon_linux_snmp.pl --plugin=os::linux::snmp::plugin --mode=cpu \\\n--hostname=$HOSTADDRESS$ --snmp-version='$_HOSTSNMPVERSION$' \\\n--snmp-community='$_HOSTSNMPCOMMUNITY$' $_HOSTSNMPEXTRAOPTIONS$ \\\n--warning-average='$_SERVICEWARNING$' \\\n--critical-average='$_SERVICECRITICAL$' $_SERVICEEXTRAOPTIONS$\n")),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Good practice requires replacing the arguments by ",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("a",{parentName:"em",href:"/centreon-documentation/pr-preview/staging/pr-2688/cloud/monitoring/basic-objects/macros#custom-macros"},"custom macros")),".")),(0,a.kt)("h2",{id:"connectors"},"Connectors"),(0,a.kt)("h3",{id:"ssh-connector"},"SSH connector"),(0,a.kt)("p",null,"Centreon SSH Connector is a free software from Centreon available under the Apache Software License version 2 (ASL 2.0).\nIt speeds up execution checks over SSH when used along Centreon Engine."),(0,a.kt)("h4",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Centreon recommends using its official packages. Most of Centreon\u2019 endorsed software are available as RPM packages."),(0,a.kt)("p",null,"Run the following commands as privileged user:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-connector-ssh\n")),(0,a.kt)("p",null,"Or you can build the Centreon SSH Connector. You will need the following external dependencies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"a C++ compilation environment."),(0,a.kt)("li",{parentName:"ul"},"CMake ",(0,a.kt)("strong",{parentName:"li"},"(>= 2.8)"),", a cross-platform build system."),(0,a.kt)("li",{parentName:"ul"},"Centreon Clib, The centreon Core library."),(0,a.kt)("li",{parentName:"ul"},"ssh2 library to use ssh functions."),(0,a.kt)("li",{parentName:"ul"},"gcrypt library to secure connections.")),(0,a.kt)("p",null,"This program is compatible only with Unix-like platforms (Linux, FreeBSD, Solaris, ...)."),(0,a.kt)("h5",{id:"prerequisites"},"Prerequisites"),(0,a.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(r.Z,{value:"CentOS",label:"CentOS",mdxType:"TabItem"},(0,a.kt)("p",null,"In CentOS you need to add manually cmake. After that you can install binary packages. Either use the Package Manager or\nthe yum tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"gcc gcc-c++ make"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ssh2 library"),(0,a.kt)("td",{parentName:"tr",align:null},"libssh2-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"SSH library.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"gcrypt library"),(0,a.kt)("td",{parentName:"tr",align:null},"libgcrypt-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Gcrypt library.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install basic compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install gcc gcc-c++ make libssh2-devel libgcrypt-devel\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install cmake")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install cmake\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),".")),(0,a.kt)(r.Z,{value:"Debian/Ubuntu",label:"Debian/Ubuntu",mdxType:"TabItem"},(0,a.kt)("p",null,"In recent Debian/Ubuntu versions, necessary software is available as binary packages from distribution repositories.\nEither use the Package Manager or the apt-get tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"build-essential"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ssh2 library"),(0,a.kt)("td",{parentName:"tr",align:null},"libssh2-1-dev"),(0,a.kt)("td",{parentName:"tr",align:null},"SSH library.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"gcrypt library"),(0,a.kt)("td",{parentName:"tr",align:null},"libgcrypt11-dev"),(0,a.kt)("td",{parentName:"tr",align:null},"Gcrypt library.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt-get install build-essential cmake libssh2-1-dev libgcrypt11-dev\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),".")),(0,a.kt)(r.Z,{value:"OpenSUSE",label:"OpenSUSE",mdxType:"TabItem"},(0,a.kt)("p",null,"In recent OpenSUSE versions, necessary software is available as binary packages from OpenSUSE repositories. Either use\nthe Package Manager or the zypper tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"gcc gcc-c++ make"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"ssh2 library"),(0,a.kt)("td",{parentName:"tr",align:null},"libssh2-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"SSH library.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"gcrypt library"),(0,a.kt)("td",{parentName:"tr",align:null},"libgcrypt-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Gcrypt library.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"zypper install gcc gcc-c++ make cmake libssh2-devel libgcrypt-devel\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),"."))),(0,a.kt)("h5",{id:"build"},"Build"),(0,a.kt)("h6",{id:"get-sources"},"Get sources"),(0,a.kt)("p",null,"Centreon SSH Connector can be checked out from ",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("a",{parentName:"em",href:"https://github.com/centreon/centreon-connectors"},"GitHub")),".\nThe SSH connector sources reside in the ssh subdirectory. On a Linux box with git installed this is just a matter of:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/centreon/centreon-connectors\n")),(0,a.kt)("h6",{id:"configuration"},"Configuration"),(0,a.kt)("p",null,"At the root of the project directory you'll find a ssh/build directory which holds build scripts. Generate the Makefile\nby running the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cd /path_to_centreon_connector/ssh/build\n")),(0,a.kt)("p",null,"Your Centreon SSH Connector can be tweaked to your particular needs using CMake's variable system. Variables can be set\nlike this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cmake -D<variable1>=<value1> [-D<variable2>=<value2>] .\n")),(0,a.kt)("p",null,"Here's the list of variables available and their description:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Variable"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Default value"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","INCLUDE","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the directory path of centreon-clib include."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","LIBRARIES"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the centreon-clib library to use."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","LIBRARY","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the centreon-clib library directory (don't use it if you use WITH","_","CENTREON","_","CLIB","_","LIBRARIES)"),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","KNOWN","_","HOSTS","_","CHECK"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable or disable Check hosts against user's known","_","hosts file."),(0,a.kt)("td",{parentName:"tr",align:null},"OFF")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBGCRYPT","_","INCLUDE","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the directory path of libgcrypt include."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBGCRYPT","_","LIBRARIES"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the libgcrypt library to use."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBGCRYPT","_","LIBRARY","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the libgcrypt library directory (don't use it if you use WITH","_","LIBGCRYPT","_","LIBRARIES)"),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBSSH2","_","INCLUDE","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the directory path of libssh2 include."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBSSH2","_","LIBRARIES"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the libssh2 library to use."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","LIBSSH2","_","LIBRARY","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the libssh2 library directory (don't use it if you use WITH","_","LIBSSH2","_","LIBRARIES)"),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","PREFIX"),(0,a.kt)("td",{parentName:"tr",align:null},"Base directory for Centreon SSH Connector installation. If other prefixes are expressed as relative paths, they are relative to this path."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/usr/local"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","PREFIX","_","BINARY"),(0,a.kt)("td",{parentName:"tr",align:null},"Define specific directory for Centreon Connector SSH binary."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"${WITH_PREFIX}/bin"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","TESTING"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable generation of unit tests. They can later be run by typing ",(0,a.kt)("em",{parentName:"td"},"make test"),". OFF"),(0,a.kt)("td",{parentName:"tr",align:null})))),(0,a.kt)("p",null,"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cmake \\\n    -DWITH_PREFIX=/usr \\\n    -DWITH_PREFIX_BINARY=/usr/lib/centreon-connector \\\n    -DWITH_TESTING=0 .\n")),(0,a.kt)("p",null,"At this step, the software will check for existence and usability of the rerequisites. If one cannot be found, an\nappropriate error message will be printed. Otherwise an installation summary will be printed."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you need to change the options you used to compile your software, you might want to remove the ",(0,a.kt)("em",{parentName:"p"},"CMakeCache.txt"),"\nfile that is in the ",(0,a.kt)("em",{parentName:"p"},"build")," directory. This will remove cache entries that might have been computed during the last\nconfiguration step.")),(0,a.kt)("h6",{id:"compilation"},"Compilation"),(0,a.kt)("p",null,"Once properly configured, the compilation process is really simple:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"make\n")),(0,a.kt)("p",null,"And wait until compilation completes."),(0,a.kt)("h6",{id:"install"},"Install"),(0,a.kt)("p",null,"Once compiled, the following command must be run as privileged user to finish installation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"make install\n")),(0,a.kt)("p",null,"And wait for its completion."),(0,a.kt)("h4",{id:"configuration-1"},"Configuration"),(0,a.kt)("p",null,"Centreon SSH Connector itself does not require any configuration. It\nshould only be configured as a connector of Centreon Engine."),(0,a.kt)("p",null,"To execute SSH check over SSH with Centreon SSH Connector from Centreon\nEngine, one might configure commands that relates to SSH check\n(like check_by_ssh)."),(0,a.kt)("h5",{id:"binary-arguments"},"Binary arguments"),(0,a.kt)("p",null,"Here are the supported arguments for ",(0,a.kt)("inlineCode",{parentName:"p"},"centreon_connector_ssh"),":"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Short name"),(0,a.kt)("th",{parentName:"tr",align:null},"Long name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-d"),(0,a.kt)("td",{parentName:"tr",align:null},"--debug"),(0,a.kt)("td",{parentName:"tr",align:null},"If this flag is specified, print all logs messages.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-h"),(0,a.kt)("td",{parentName:"tr",align:null},"--help"),(0,a.kt)("td",{parentName:"tr",align:null},"Print help and exit.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-v"),(0,a.kt)("td",{parentName:"tr",align:null},"--version"),(0,a.kt)("td",{parentName:"tr",align:null},"Print software version and exit.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-l"),(0,a.kt)("td",{parentName:"tr",align:null},"--log-file"),(0,a.kt)("td",{parentName:"tr",align:null},"Specifies the log file (default: stderr).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-2"),(0,a.kt)("td",{parentName:"tr",align:null},"--proto2"),(0,a.kt)("td",{parentName:"tr",align:null},"Tell ssh to use Protocol 2.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-4"),(0,a.kt)("td",{parentName:"tr",align:null},"--use-ipv4"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable IPv4 connection.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-6"),(0,a.kt)("td",{parentName:"tr",align:null},"--use-ipv6"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable IPv6 connection.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-a"),(0,a.kt)("td",{parentName:"tr",align:null},"--authentication"),(0,a.kt)("td",{parentName:"tr",align:null},"Authentication password.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-C"),(0,a.kt)("td",{parentName:"tr",align:null},"--command"),(0,a.kt)("td",{parentName:"tr",align:null},"Command to execute on the remote machine.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-E"),(0,a.kt)("td",{parentName:"tr",align:null},"--skip-stderr"),(0,a.kt)("td",{parentName:"tr",align:null},"Ignore all or first n lines on STDERR.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-H"),(0,a.kt)("td",{parentName:"tr",align:null},"--hostname"),(0,a.kt)("td",{parentName:"tr",align:null},"Host name, IP Address.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-i"),(0,a.kt)("td",{parentName:"tr",align:null},"--identity"),(0,a.kt)("td",{parentName:"tr",align:null},"Identity of an authorized key.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-l"),(0,a.kt)("td",{parentName:"tr",align:null},"--logname"),(0,a.kt)("td",{parentName:"tr",align:null},"SSH user name on remote host.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-p"),(0,a.kt)("td",{parentName:"tr",align:null},"--port"),(0,a.kt)("td",{parentName:"tr",align:null},"Port number (default: 22)")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-S"),(0,a.kt)("td",{parentName:"tr",align:null},"--skip-stdout"),(0,a.kt)("td",{parentName:"tr",align:null},"Ignore all or first n lines on STDOUT.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-t"),(0,a.kt)("td",{parentName:"tr",align:null},"--timeout"),(0,a.kt)("td",{parentName:"tr",align:null},"Seconds before connection times out (default: 10).")))),(0,a.kt)("h5",{id:"check-arguments"},"Check arguments"),(0,a.kt)("p",null,"These arguments are checks options (like check_by_ssh options)."),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Short name"),(0,a.kt)("th",{parentName:"tr",align:null},"Long name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","1"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-proto1"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","2"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-proto2"),(0,a.kt)("td",{parentName:"tr",align:null},"Tell ssh to use Protocol 2.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","4"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-use-ipv4"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable IPv4 connection.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","6"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-use-ipv6"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable IPv6 connection.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","a"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-authentication"),(0,a.kt)("td",{parentName:"tr",align:null},"Authentication password.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","C"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-command"),(0,a.kt)("td",{parentName:"tr",align:null},"Command to execute on the remote machine.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","E"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-skip-stderr"),(0,a.kt)("td",{parentName:"tr",align:null},"Ignore all or first n lines on STDERR.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","f"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-fork"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","h"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-help"),(0,a.kt)("td",{parentName:"tr",align:null},"Not used.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","H"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-hostname"),(0,a.kt)("td",{parentName:"tr",align:null},"Host name, IP Address.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","i"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-identity"),(0,a.kt)("td",{parentName:"tr",align:null},"Identity of an authorized key.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","l"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-logname"),(0,a.kt)("td",{parentName:"tr",align:null},"SSH user name on remote host.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","n"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-name"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","o"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-ssh-option"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","O"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-output"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","p"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-port"),(0,a.kt)("td",{parentName:"tr",align:null},"Port number (default 22).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","q"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-quiet"),(0,a.kt)("td",{parentName:"tr",align:null},"Not used.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","s"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-services"),(0,a.kt)("td",{parentName:"tr",align:null},"This option is not supported.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","S"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-skip-stdout"),(0,a.kt)("td",{parentName:"tr",align:null},"Ignore all or first n lines on STDOUT.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","t"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-timeout"),(0,a.kt)("td",{parentName:"tr",align:null},"Seconds before connection times out (default 10).")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","v"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-verbose"),(0,a.kt)("td",{parentName:"tr",align:null},"Not used.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","V"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-version"),(0,a.kt)("td",{parentName:"tr",align:null},"Not used.")))),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},'define connector{\n    connector_name centreon_connector_ssh\n    connector_line /usr/lib64/centreon-connector/centreon_connector_ssh --log-file=/var/log/centreon-engine/centreon-connector-ssh.log\n}\n\ndefine command{\n    command_name ssh_check_cpu\n    command_line $USER1$/check_by_ssh -H $HOSTADDRESS$ -l $_HOSTUSER$ -a $_HOSTPASSWORD$ -C "$USER1$/check_cpu -w $ARG1$ -c $ARG2$"\n    connector centreon_connector_ssh\n}\n\ndefine command{\n    command_name ssh_check_disk\n    command_line $USER1$/check_by_ssh -H $HOSTADDRESS$ -l $_HOSTUSER$ -a $_HOSTPASSWORD$ -C "$USER1$/check_disk -D $ARG1$ -w $ARG2$ -c $ARG3$"\n    connector centreon_connector_ssh\n}\n')),(0,a.kt)("h5",{id:"technical-details"},"Technical details"),(0,a.kt)("p",null,"This article describes how Centreon SSH Connector allow much gain on SSH check execution."),(0,a.kt)("p",null,"One major CPU-intensive and long operation in a SSH environment is the key exchange and verification mechanism. This\noperation occurs when a SSH session is started between two hosts. After this step all exchange operations are using far\nless resources."),(0,a.kt)("p",null,'Centreon SSH Connector take advantage of this fact and maintain semi-permanent connection with hosts to which it had to\nconnect to. This way if multiple checks are performed on the same host, where "check_by_ssh" opens one session for each\ncheck, Centreon Connector SSH only opens one session. However this does not limit the number of concurrent checks on a\nhost, as the SSH protocol allows multiple channels to be opened on the same session. Therefore if multiple checks are\nrun on the same host simultaneously, they are executed concurrently but with separate execution environment.'),(0,a.kt)("h3",{id:"perl-connector"},"Perl connector"),(0,a.kt)("p",null,"Centreon Perl Connector is a free software from Centreon available under the Apache Software License version 2 (ASL 2.0).\nIt speeds up execution of Perl scripts when used along Centreon Engine."),(0,a.kt)("h4",{id:"installation-1"},"Installation"),(0,a.kt)("p",null,"Centreon recommends using its official packages. Most of Centreon\u2019 endorsed software are available as RPM packages."),(0,a.kt)("p",null,"Run the following commands as privileged user:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install centreon-connector-perl\n")),(0,a.kt)("p",null,"Or you can build the Centreon SSH Connector. You will need the following external dependencies:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"a C++ compilation environment."),(0,a.kt)("li",{parentName:"ul"},"CMake ",(0,a.kt)("strong",{parentName:"li"},"(>= 2.8)"),", a cross-platform build system."),(0,a.kt)("li",{parentName:"ul"},"Centreon Clib, The centreon Core library."),(0,a.kt)("li",{parentName:"ul"},"ssh2 library to use ssh functions."),(0,a.kt)("li",{parentName:"ul"},"gcrypt library to secure connections.")),(0,a.kt)("p",null,"This program is compatible only with Unix-like platforms (Linux, FreeBSD, Solaris, ...)."),(0,a.kt)("h5",{id:"prerequisites-1"},"Prerequisites"),(0,a.kt)(l.Z,{groupId:"sync",mdxType:"Tabs"},(0,a.kt)(r.Z,{value:"CentOS",label:"CentOS",mdxType:"TabItem"},(0,a.kt)("p",null,"In CentOS you need to add manually cmake. After that you can install binary packages. Either use the Package Manager or\nthe yum tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"gcc gcc-c++ make"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Perl"),(0,a.kt)("td",{parentName:"tr",align:null},"perl"),(0,a.kt)("td",{parentName:"tr",align:null},"Scripting language.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install basic compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install gcc gcc-c++ make perl\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install cmake")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"yum install cmake\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),".")),(0,a.kt)(r.Z,{value:"Debian/Ubuntu",label:"Debian/Ubuntu",mdxType:"TabItem"},(0,a.kt)("p",null,"In recent Debian/Ubuntu versions, necessary software is available as binary packages from distribution repositories.\nEither use the Package Manager or the apt-get tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"build-essential"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Perl"),(0,a.kt)("td",{parentName:"tr",align:null},"libperl-dev"),(0,a.kt)("td",{parentName:"tr",align:null},"Scripting language.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"apt-get install build-essential cmake libperl-dev\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),".")),(0,a.kt)(r.Z,{value:"OpenSUSE",label:"OpenSUSE",mdxType:"TabItem"},(0,a.kt)("p",null,"In recent OpenSUSE versions, necessary software is available as binary packages from OpenSUSE repositories. Either use\nthe Package Manager or the zypper tool to install them. You should check packages version when necessary."),(0,a.kt)("p",null,"Package required to build:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Software"),(0,a.kt)("th",{parentName:"tr",align:null},"Package Name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"C++ compilation environment"),(0,a.kt)("td",{parentName:"tr",align:null},"gcc gcc-c++ make"),(0,a.kt)("td",{parentName:"tr",align:null},"Mandatory tools to compile.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"CMake ",(0,a.kt)("strong",{parentName:"td"},"(",">","= 2.8)")),(0,a.kt)("td",{parentName:"tr",align:null},"cmake"),(0,a.kt)("td",{parentName:"tr",align:null},"Read the build script and prepare sources for compilation.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Centreon Clib (",">","= 1.0)"),(0,a.kt)("td",{parentName:"tr",align:null},"centreon-clib-devel"),(0,a.kt)("td",{parentName:"tr",align:null},"Core library used by Centreon Connector.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"Perl"),(0,a.kt)("td",{parentName:"tr",align:null},"perl"),(0,a.kt)("td",{parentName:"tr",align:null},"Scripting language.")))),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Install compilation tools")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"zypper install gcc gcc-c++ make cmake perl\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"Install Centreon Clib")),(0,a.kt)("p",null,"See the Centreon Clib @TODO@:ref:",(0,a.kt)("inlineCode",{parentName:"p"},"documentation <centreon-clib:centreon_clib_install>"),"."))),(0,a.kt)("h5",{id:"build-1"},"Build"),(0,a.kt)("h6",{id:"get-sources-1"},"Get sources"),(0,a.kt)("p",null,"Centreon Perl Connector can be checked out from ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/centreon/centreon-connectors"},"GitHub"),".\nThe Perl connector sources reside in the perl subdirectory. On a Linux box with git installed this is just a matter of:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/centreon/centreon-connectors\n")),(0,a.kt)("h6",{id:"configuration-2"},"Configuration"),(0,a.kt)("p",null,"At the root of the project directory you'll find a perl/build directory which holds build scripts. Generate the Makefile\nby running the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cd /path_to_centreon_connector/perl/build\n")),(0,a.kt)("p",null,"Your Centreon Perl Connector can be tweaked to your particular needs using CMake's variable system. Variables can be set\nlike this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cmake -D<variable1>=<value1> [-D<variable2>=<value2>] .\n")),(0,a.kt)("p",null,"Here's the list of variables available and their description:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Variable"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"),(0,a.kt)("th",{parentName:"tr",align:null},"Default value"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","INCLUDE","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the directory path of centreon-clib include."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","LIBRARIES"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the centreon-clib library to use."),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","CENTREON","_","CLIB","_","LIBRARY","_","DIR"),(0,a.kt)("td",{parentName:"tr",align:null},"Set the centreon-clib library directory (don't use it if you use WITH","_","CENTREON","_","CLIB","_","LIBRARIES)"),(0,a.kt)("td",{parentName:"tr",align:null},"auto detection")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","PREFIX"),(0,a.kt)("td",{parentName:"tr",align:null},"Base directory for Centreon PErl Connector installation. If other prefixes are expressed as relative paths, they are relative to this path."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"/usr/local"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","PREFIX","_","BINARY"),(0,a.kt)("td",{parentName:"tr",align:null},"Define specific directory for Centreon Connector Perl binary."),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"${WITH_PREFIX}/bin"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"WITH","_","TESTING"),(0,a.kt)("td",{parentName:"tr",align:null},"Enable generation of unit tests. They can later be run by typing ",(0,a.kt)("em",{parentName:"td"},"make test"),"."),(0,a.kt)("td",{parentName:"tr",align:null},"OFF")))),(0,a.kt)("p",null,"Example"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cmake \\\n    -DWITH_PREFIX=/usr \\\n    -DWITH_PREFIX_BINARY=/usr/lib/centreon-connector \\\n    -DWITH_TESTING=0 .\n")),(0,a.kt)("p",null,"At this step, the software will check for existence and usability of the rerequisites. If one cannot be found, an\nappropriate error message will be printed. Otherwise an installation summary will be printed."),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you need to change the options you used to compile your software, you might want to remove the ",(0,a.kt)("em",{parentName:"p"},"CMakeCache.txt"),"\nfile that is in the ",(0,a.kt)("em",{parentName:"p"},"build")," directory. This will remove cache entries that might have been computed during the last\nconfiguration step.")),(0,a.kt)("h6",{id:"compilation-1"},"Compilation"),(0,a.kt)("p",null,"Once properly configured, the compilation process is really simple:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"make\n")),(0,a.kt)("p",null,"And wait until compilation completes."),(0,a.kt)("h6",{id:"install-1"},"Install"),(0,a.kt)("p",null,"Once compiled, the following command must be run as privileged user to finish installation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"make install\n")),(0,a.kt)("p",null,"And wait for its completion."),(0,a.kt)("h4",{id:"configuration-3"},"Configuration"),(0,a.kt)("p",null,"Centreon Perl Connector itself does not require any configuration. It should only be configured as a connector of\nCentreon Engine."),(0,a.kt)("p",null,"To execute Perl scripts with Centreon Perl Connector from Centreon Engine, one might configure commands that relates to\nPerl scripts. Such commands must only contain the path to the Perl script to execute followed by its arguments, just\nlike one would on the command line. To make it simple, you just have to add a connector property to your command\ndefinition."),(0,a.kt)("h5",{id:"binary-arguments-1"},"Binary arguments"),(0,a.kt)("p",null,"Here are the supported arguments for ",(0,a.kt)("inlineCode",{parentName:"p"},"centreon_connector_perl"),":"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Short name"),(0,a.kt)("th",{parentName:"tr",align:null},"Long name"),(0,a.kt)("th",{parentName:"tr",align:null},"Description"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","d"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-debug"),(0,a.kt)("td",{parentName:"tr",align:null},"If this flag is specified, print all logs messages.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","h"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-help"),(0,a.kt)("td",{parentName:"tr",align:null},"Print help and exit.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","v"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-version"),(0,a.kt)("td",{parentName:"tr",align:null},"Print software version and exit.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","c"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-code"),(0,a.kt)("td",{parentName:"tr",align:null},"Argument is some Perl code that will be executed by the embedded interpreter.")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"-","l"),(0,a.kt)("td",{parentName:"tr",align:null},"-","-log-file"),(0,a.kt)("td",{parentName:"tr",align:null},"Specifies the log file (default: stderr).")))),(0,a.kt)("p",null,"Example:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"define connector{\n    connector_name centreon_connector_perl\n    connector_line /usr/lib64/centreon-connector/centreon_connector_perl --log-file=/var/log/centreon-engine/centreon-connector-perl.log\n}\n\ndefine command{\n    command_name check_ping\n    command_line $USER1$/check_ping.pl -H $HOSTADDRESS$\n    connector centreon_connector_perl\n}\n\ndefine command{\n    command_name check_disk\n    command_line $USER1$/check_disk.pl -H $HOSTADDRESS$ -D $ARG1$\n    connector centreon_connector_perl\n}\n")),(0,a.kt)("h5",{id:"technical-details-1"},"Technical details"),(0,a.kt)("p",null,"This article describes how Centreon Perl Connector allow much gain on Perl script execution."),(0,a.kt)("p",null,"First of all let's examine how a Perl script is executed traditionnally by Centreon Engine."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Centreon Engine forks, creating a new separate process."),(0,a.kt)("li",{parentName:"ul"},"This new process executes the execve syscall to run the Perl interpreter. This step does not create a new process."),(0,a.kt)("li",{parentName:"ul"},"The Perl interpreter parse the Perl script."),(0,a.kt)("li",{parentName:"ul"},"Perl script get executed.")),(0,a.kt)("p",null,"With Centreon Engine, the same script get executed multiple times but with different arguments. Therefore we took\nadvantage of this fact to efficiently parse all the scripts once and get them executed. This was only possible because\nof the fork()ing system of Unix-like platform. If you read the reference page on Wikipedia you indeed remarked that\nonce fork()ed the old and the new process are identical. Centreon Connector Perl's steps to execute scripts are as\nfollow."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Centreon Engine creates a resident process of Centreon Connector Perl once"),(0,a.kt)("li",{parentName:"ul"},"For all Perl scripts execution requests are forwarded to this process when requested to execute a script, Centreon\nPerl Connector checks if this script has already been parsed if not it parses it using the Embedded Perl interpreter."),(0,a.kt)("li",{parentName:"ul"},"Centreon Perl Connector forks itself."),(0,a.kt)("li",{parentName:"ul"},"The precompiled script gets executed")),(0,a.kt)("p",null,"This way Perl scripts are only parsed once during the lifetime of the monitoring engine. This heavily relates to\n",(0,a.kt)("em",{parentName:"p"},(0,a.kt)("a",{parentName:"em",href:"http://en.wikipedia.org/wiki/Prepared_statements"},"prepared statements"))," in SQL."))}N.isMDXComponent=!0},50315:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/04command-bc491d2b335a9186d768e5d82688ba5b.png"},5744:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/04commandlist-01e4e53d62927daeb15bbf4ced2db8a1.png"}}]);